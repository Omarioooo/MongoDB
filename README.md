# MongoDB Cheat Sheet & Learning Guide
_By Omar Mohamed_

---

## üìÑ MongoDB Overview

- **MongoDB is a Document-Oriented Database**.
- Written in **C++**.
- Uses **Sharding** to split large databases into smaller, faster, manageable pieces (called _shards_).
- Each document has a **Primary Key** called `_id` (automatically created if not specified).
- Stores data as **BSON** (Binary JSON).

### üìñ Collection
- Group of documents.
- Equivalent to an RDBMS **table**.
- **Schema-less**.

### üìù Document
- Key-value pairs.
- Flexible **dynamic schema** (structure can differ for each document).

### üåê RDBMS vs MongoDB

| RDBMS         | MongoDB           |
|---------------|-------------------|
| Database      | Database          |
| Table         | Collection        |
| Row / Tuple   | Document          |
| Column        | Field             |
| Table Join    | Embedded Documents|
| Primary Key   | `_id` Field        |

---

## üìä MongoDB Data Types

| Data Type               | Description                                        | Example                                               |
|--------------------------|----------------------------------------------------|-------------------------------------------------------|
| **String**               | UTF-8 text data                                    | `"name": "Omar"`                                      |
| **Integer (int32, int64)** | Numerical values (`int32`, `int64`)               | `"age": 21`                                           |
| **Double**               | 64-bit floating-point number                       | `"price": 19.99`                                      |
| **Decimal128**           | High-precision decimal                             | `"balance": NumberDecimal("1234.56")`                 |
| **Boolean**              | `true` or `false`                                  | `"isActive": true`                                     |
| **Array**                | Multiple values in one field                       | `"hobbies": ["coding", "music"]`                      |
| **Object**               | Embedded document (sub-document)                   | `"address": {"city": "Cairo", "zip": "12345"}`        |
| **ObjectId**             | Unique ID generated by MongoDB                     | `"_id": ObjectId("507f1f77bcf86cd799439011")`         |
| **Date**                 | UTC Date & Time                                    | `"createdAt": ISODate("2025-04-14T09:00:00Z")`        |
| **Null**                 | `null` value                                       | `"deletedAt": null`                                    |
| **Binary Data (BinData)**| Stores binary files                                | `"fileData": BinData(0, "MZ...")`                     |
| **Regex**                | Regular Expressions                                | `"pattern": /abc/i`                                   |
| **JavaScript**           | JavaScript code                                    | `"func": function() { return true; }`                  |
| **JavaScript with Scope**| JavaScript code with context                       | `Code("return x + y;", { x:1, y:2 })`                 |
| **Timestamp**            | Timestamp (system internal)                        | `"lastModified": Timestamp(1642558800, 1)`            |
| **MinKey**               | Minimum BSON type                                 | `{ "minKey": MinKey() }`                              |
| **MaxKey**               | Maximum BSON type                                 | `{ "maxKey": MaxKey() }`                              |

---

## üí° Example Document

```javascript
db.dataTypesExample.insertOne({
    stringExample: "Hello, MongoDB!",
    intExample: 42,
    longExample: NumberLong("9223372036854775807"),
    doubleExample: 3.14159,
    decimalExample: NumberDecimal("1234567890.123456789"),
    booleanExample: true,
    arrayExample: ["MongoDB", "Java", "Data"],
    objectExample: { city: "Cairo", zipCode: "12345" },
    objectIdExample: ObjectId("507f191e810c19729de860ea"),
    dateExample: ISODate("2025-04-14T12:00:00Z"),
    nullExample: null,
    binaryExample: new BinData(0, "SGVsbG8sIE1vbmdvREEh"),
    regexExample: /Mongo/i,
    javascriptExample: function() { return "Hello from JavaScript!"; },
    javascriptWithScopeExample: new Code("return x + y;", { x: 10, y: 20 }),
    timestampExample: Timestamp(1610000000, 1),
    minKeyExample: MinKey(),
    maxKeyExample: MaxKey()
});
```

---

## üìô Basic Commands

```bash
mongosh               # Start MongoDB Shell
show dbs              # List all databases
use <dbname>          # Switch to database
db                    # Show current database name
show collections      # Show all collections
db.dropDatabase()     # Delete current database
exit                  # Exit the MongoDB Shell
```

---

## üìù Create Operations

```javascript
db.users.insertOne({ name: "Kyle" })
db.users.insertMany([{ age: 26 }, { age: 20 }])
```

---

## üîç Read Operations

```javascript
db.users.find()
db.users.find({ name: "Kyle" })
db.users.find({ "address.street": "123 Main St" })
db.users.find({ name: "Kyle" }, { name: 1, age: 1 })
db.users.find({}, { age: 0 })
db.users.findOne({ name: "Kyle" })
db.users.countDocuments({ name: "Kyle" })
```

---

## üõ†Ô∏è Update Operations

```javascript
db.users.updateOne({ age: 20 }, { $set: { age: 21 } })
db.users.updateMany({ age: 12 }, { $inc: { age: 3 } })
db.users.replaceOne({ age: 12 }, { age: 13 })
```

---

## üóëÔ∏è Delete Operations

```javascript
db.users.deleteOne({ age: 20 })
db.users.deleteMany({ age: 12 })
```

---

## üõ†Ô∏è Query Filter Operators

| Operator | Description            | Example                                     |
|----------|------------------------|---------------------------------------------|
| `$eq`    | Equal to               | `{ name: { $eq: "Kyle" } }`                 |
| `$ne`    | Not equal              | `{ name: { $ne: "Kyle" } }`                |
| `$gt` / `$gte` | Greater than / equal | `{ age: { $gt: 12 } }`                   |
| `$lt` / `$lte` | Less than / equal   | `{ age: { $lt: 12 } }`                    |
| `$in`    | Value in array         | `{ name: { $in: ["Kyle", "Mike"] } }`     |
| `$nin`   | Value not in array     | `{ name: { $nin: ["Kyle", "Mike"] } }`    |
| `$and`   | Logical AND            | `{ $and: [{ age: 12 }, { name: "Kyle" }] }` |
| `$or`    | Logical OR             | `{ $or: [{ age: 12 }, { name: "Kyle" }] }`  |
| `$not`   | Negation               | `{ name: { $not: { $eq: "Kyle" } } }`      |
| `$exists`| Field existence        | `{ name: { $exists: true } }`              |
| `$expr`  | Compare fields         | `{ $expr: { $gt: ["$balance", "$debt"] } }`|

---

## üõ†Ô∏è Update Operators

| Operator  | Purpose              | Example                                     |
|-----------|-----------------------|---------------------------------------------|
| `$set`    | Update value          | `{ $set: { name: "Hi" } }`                  |
| `$inc`    | Increment             | `{ $inc: { age: 2 } }`                      |
| `$rename` | Rename field          | `{ $rename: { age: "years" } }`            |
| `$unset`  | Delete field          | `{ $unset: { age: "" } }`                   |
| `$push`   | Add value to array    | `{ $push: { friends: "John" } }`           |
| `$pull`   | Remove value from array | `{ $pull: { friends: "Mike" } }`        |

---

## üî¢ Read Modifiers

```javascript
db.users.find().sort({ age: -1 })     // Descending order
db.users.find().limit(5)             // Limit results to 5
db.users.find().skip(2)              // Skip 2 results
db.users.find().pretty()             // Pretty print
```

---

## üöÄ Bonus: Indexes

```javascript
db.users.createIndex({ age: 1 })
db.users.createIndex({ name: 1, age: -1 })
db.users.getIndexes()
db.users.dropIndex("age_1")
```

---

> ‚ú® **Tip:** MongoDB is a great choice for flexible, schema-less data, especially in modern web apps (Node.js, Java, Python). Practice daily to master querying & indexing.

---

# Happy Learning! üöÄ

_By: Omar Mohamed_

